"use strict";const API_DATA="http://api.tvmaze.com/search/shows";let shows=[],favourites=getFavouritesFromLocalStorage();const form=document.querySelector("#searchForm");function setEventListenerToShow(e,t){const{image:r,name:o,id:s}=e;t.addEventListener("click",e=>{e.preventDefault();const a={id:s,image:r,name:o};favourites.some(e=>e.id===a.id)?(favourites=favourites.filter(e=>e.id!==a.id),t.classList.remove("favourite")):(favourites.push(a),t.classList.add("favourite")),renderFavourites(),renderShows(),setFavouritesToLocalStorage(),getFavouritesFromLocalStorage()})}function renderShow(e,t){const{image:r,name:o,id:s}=e,a=document.createElement("div"),i=`\n                    <img src="${r?r.original:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV-SHOW"}" \n                         alt="${r?o:"No hay imagen disponible"}"\n                         title="${o}">\n                    <h3>${o}</h3>\n                    <div class="results-item-favourite">\n                        <i class="fa fa-star fa-2x"><span class="star"></span></i>\n                    </div>\n                `;a.classList.add("results-item"),favourites.some(e=>e.id===s)&&a.classList.add("favourite"),a.innerHTML=i,setEventListenerToShow(e,a),t.appendChild(a)}function renderFavourites(){const e=document.querySelector("#favourites .series__container-list");e.innerHTML="",favourites.forEach(t=>{renderShow(t,e)})}function renderShows(){const e=document.querySelector("#result .series__container-list");e.innerHTML="",shows.forEach(t=>{renderShow(t,e)})}function setFavouritesToLocalStorage(){localStorage.setItem("favourites",JSON.stringify(favourites))}function getFavouritesFromLocalStorage(){return JSON.parse(localStorage.getItem("favourites"))||[]}form.addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("formQuery").value,r=`${API_DATA}?q=${t}`,o=document.querySelector("#result");shows=[],o.querySelector(".series__container-list").innerHTML="",fetch(r).then(e=>e.json()).then(e=>{e.forEach(e=>{shows.push(e.show)}),renderShows()})}),renderFavourites();