{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst API_DATA = 'http://api.tvmaze.com/search/shows';\n\nlet shows = [];\nlet favourites = getFavouritesFromLocalStorage();\n\nconst form = document.querySelector('#searchForm');\n\nfunction setEventListenerToShow (show, item) {\n    const {image, name, id} = show;\n\n    item.addEventListener('click', event => {\n        event.preventDefault();\n        const itemToPush = {id, image, name};\n        if (favourites.some(element => element.id === itemToPush.id)) {\n            favourites = favourites.filter(element => element.id !== itemToPush.id);\n            item.classList.remove('favourite');\n        } else {\n            favourites.push(itemToPush);\n            item.classList.add('favourite');\n        }\n        renderFavourites();\n        renderShows();\n        setFavouritesToLocalStorage();\n        getFavouritesFromLocalStorage();\n    });\n}\n\nfunction renderShow (show, target) {\n    const {image, name, id} = show;\n    const altImage = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV-SHOW';\n    const altText = 'No hay imagen disponible';\n    const item = document.createElement('div');\n    const template = `\n                    <img src=\"${image ? image.original : altImage}\" \n                         alt=\"${image ? name : altText}\"\n                         title=\"${name}\">\n                    <h3>${name}</h3>\n                    <div class=\"results-item-favourite\">\n                        <i class=\"fa fa-star fa-2x\"><span class=\"star\"></span></i>\n                    </div>\n                `;\n\n    item.classList.add('results-item');\n    if (favourites.some(element => element.id === id)) {\n        item.classList.add('favourite');\n    }\n    item.innerHTML = template;\n\n    setEventListenerToShow(show, item)\n\n    target.appendChild(item);\n}\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    const query = document.getElementById('formQuery').value;\n    const apiUrl = `${API_DATA}?q=${query}`;\n    const target = document.querySelector('#result');\n\n    shows = [];\n\n    target.querySelector('.series__container-list').innerHTML = '';\n    fetch(apiUrl)\n        .then(res => res.json())\n        .then(results => {\n            results.forEach(result => {\n                shows.push(result.show);\n            });\n\n            renderShows();\n        });\n});\n\nfunction renderFavourites () {\n    const favouritesList = document.querySelector('#favourites .series__container-list');\n    favouritesList.innerHTML = '';\n    favourites.forEach(favourite => {\n        renderShow(favourite, favouritesList)\n    });\n}\n\nfunction renderShows () {\n    const showsList = document.querySelector('#result .series__container-list');\n    showsList.innerHTML = '';\n    shows.forEach(show => {\n        renderShow(show, showsList)\n    });\n}\n\nfunction setFavouritesToLocalStorage() {\n    localStorage.setItem('favourites', JSON.stringify(favourites));\n}\n\nfunction getFavouritesFromLocalStorage() {\n    return JSON.parse(localStorage.getItem('favourites')) || [];\n}\n\nrenderFavourites ();\n\n\n/*\nCuando haga click en el bot√≥n\nfavourites = []\nrenderFavourites();\nrenderShows();\nsetFavouritesToLocalStorage();\n*/"]}